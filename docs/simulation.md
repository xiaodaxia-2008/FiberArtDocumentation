# 仿真
在主菜单栏的功能的下拉菜单中，选中“铺放仿真及后置”，调出仿真后置面板。

![type:video](./images/SimulationSpar.mp4)

## 设置
- 导轨：设置运动系统的机器人线性导轨
- 机器人：设置运动系统的机器人
- 变位机：设置运动系统的变位机
- 铺层：设置需要仿真的铺放(Ply)
- 自动选择：自动从场景树中选择导轨、机器人、变位机、铺层
  

## 运动学算法
设置用于计算运动系统逆运动学的算法：
- 优化联动：建立优化模型，自动计算每个点导轨、机器人、变位机的关节值
- 规则联动：根据下面给定的规则计算导轨、变位机的位置，继而求出机器人的关节位置
  
## 变位机
在规则联动的算法下，用来设置以何种策略计算变位机的位置。

- 策略，计算变位机位置的策略：
    - 对齐：旋转变位机，以使轨迹点的指向与参考方向一致
    - 对齐-线性插值：只在一组铺放轨迹的起点和终点使用对齐策略求解变位机位置，中间点进行线性插值
    - 对齐-三次插值：只在一组铺放轨迹的起点和终点使用对齐策略求解变位机位置，中间点进行三次多项式插值
    - 固定：变位机固定为给定的位置
    - 自动固定：在一组铺放轨迹中，自动计算一个合适的变位机位置，并保持固定；相邻组之间使用线性插值
- 固定位置：使用固定策略时，变位机的固定关节位置
- 起始方向：一组铺放轨迹的起点的参考方向，一般是将Z方向沿着变位机的旋转轴旋转该给定的角度，起点和终点之间的参考方向使用线性插值
- 结束方向：一组铺放轨迹的终点的参考方向，一般是将Z方向沿着变位机的旋转轴旋转该给定的角度
- 法线权重：轨迹点的指向与参考方向对齐时，该指向如何计算，使用该点法向和由旋转轴到该点的射线方向（类似于自行车轮的辐辏线）加权计算，这里定义法线的权重


## 仿真
用于控制仿真开始、暂停、继续，以及设置仿真的速度。

## 后置
用于选择后置处理脚本，输出NC程序等。

- 后置程序，可以在下拉选项中选择系统预设的后置程序，也可以选择自己编写的后置程序，注意后置程序的名称不能相同
- 导出路径：设置NC程序的导出路径
- 参考节点：设置NC程序中坐标的参考系，一般是世界坐标，或者工件，或者变位机的工具中心

